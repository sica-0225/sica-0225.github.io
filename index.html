<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WEBSITE - 首頁</title>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M3PJB5T6');</script>
<!-- End Google Tag Manager -->

<link rel="stylesheet" href="style.css">
<!-- 移除 hero.css，因為我們不再需要那個元件 -->
<!-- <link rel="stylesheet" href="hero.css"> -->
<!-- === 引用新的 modal.css === -->
<link rel="stylesheet" href="modal.css">
</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3PJB5T6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header>
    <a href="index.html" class="logo">WEBSITE</a>
    <nav>
        <!-- 按鈕觸發 modal，所以這裡可以簡化 -->
        <a href="#hero-section">探索車款</a>
        <a href="dealers.html">經銷商據點</a>
    </nav>
    <div class="header-actions">
        <a href="order.html" class="btn-secondary">線上訂購</a>
    </div>
</header>

<main>
    <!-- 我們沿用一個簡單的 Hero Banner 作為背景 -->
    <section id="hero-section" style="background-image: url('https://via.placeholder.com/1920x1080/222/fff?text=The+Future+is+Here');">
        <div class="content">
            <h1>探索您的下一部座駕</h1>
            <p>點擊下方按鈕，瀏覽我們完整的車系陣容</p>
            <div class="buttons">
                <!-- === 這個按鈕將用來打開彈出視窗 === -->
                <button id="open-modal-btn" class="btn-primary">探索全車系</button>
                <a href="dealers.html" class="btn-secondary">尋找經銷商</a>
            </div>
        </div>
    </section>
    
    <section style="padding: 4rem 2rem; text-align: center;">
        <h2>品牌承諾</h2>
        <p>我們致力於創新、安全與永續發展。</p>
    </section>
</main>

<!-- === 彈出視窗的 HTML 結構 (放在 body 結尾) === -->
<div id="vehicle-modal" class="modal-overlay">
    <div class="modal-content">
        <button id="modal-close-btn" class="modal-close-btn">&times;</button>
        <div class="modal-body">
            <aside class="vehicle-sidebar">
                <ul class="filter-list">
                    <li><button class="filter-btn active" data-filter="all" data-title="全車系">全車系</button></li>
                    <li><button class="filter-btn" data-filter="suv" data-title="休旅車">休旅車</button></li>
                    <li><button class="filter-btn" data-filter="sedan" data-title="轎車">轎車</button></li>
                    <li><button class="filter-btn" data-filter="ev" data-title="電動車">電動車</button></li>
                </ul>
            </aside>
            <div class="vehicle-content">
                <h2 id="category-title">全車系</h2>
                <div id="vehicle-grid" class="vehicle-grid">
                    <!-- 車款卡片將由 JavaScript 動態生成於此 -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- === JavaScript 互動邏輯 === -->
<script>
    // 1. 車款資料庫
    const vehicles = [
        { name: 'Kuga', category: 'suv', image: 'https://via.placeholder.com/400x300/555/fff?text=Kuga', link: 'learn-more.html?model=kuga' },
        { name: 'Focus', category: 'sedan', image: 'https://via.placeholder.com/400x300/666/fff?text=Focus', link: 'learn-more.html?model=focus' },
        { name: 'Mustang Mach-E', category: 'ev', image: 'https://via.placeholder.com/400x300/777/fff?text=Mach-E', link: 'learn-more.html?model=mach-e' },
        { name: 'Explorer', category: 'suv', image: 'https://via.placeholder.com/400x300/888/fff?text=Explorer', link: 'learn-more.html?model=explorer' },
        { name: 'Mondeo', category: 'sedan', image: 'https://via.placeholder.com/400x300/999/fff?text=Mondeo', link: 'learn-more.html?model=mondeo' },
        { name: 'Ranger', category: 'suv', image: 'https://via.placeholder.com/400x300/AAA/fff?text=Ranger', link: 'learn-more.html?model=ranger' }
    ];

    // 2. 獲取 DOM 元素
    const openModalBtn = document.getElementById('open-modal-btn');
    const modalOverlay = document.getElementById('vehicle-modal');
    const closeModalBtn = document.getElementById('modal-close-btn');
    
    const grid = document.getElementById('vehicle-grid');
    const filterList = document.querySelector('.filter-list');
    const categoryTitle = document.getElementById('category-title');

    // 3. 渲染車款卡片的函式
    function renderVehicles(filter) {
        grid.innerHTML = '';
        const filteredVehicles = vehicles.filter(v => filter === 'all' || v.category === filter);

        if (filteredVehicles.length === 0) {
            grid.innerHTML = '<p>此分類目前沒有車款。</p>';
            return;
        }

        filteredVehicles.forEach(vehicle => {
            const card = document.createElement('div');
            card.className = 'vehicle-card';
            card.innerHTML = `
                <img src="${vehicle.image}" alt="${vehicle.name}">
                <h3>${vehicle.name}</h3>
                <a href="${vehicle.link}" class="btn-learn-more">了解更多</a>
            `;
            grid.appendChild(card);
        });
    }

    // 4. 控制 Modal 的開關
    function openModal() {
        modalOverlay.classList.add('visible');
        // 每次打開時，都渲染一次，確保內容最新
        renderVehicles(filterList.querySelector('.active').dataset.filter);
    }

    function closeModal() {
        modalOverlay.classList.remove('visible');
    }

    openModalBtn.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);
    // 點擊背景遮罩也可以關閉視窗
    modalOverlay.addEventListener('click', (event) => {
        if (event.target === modalOverlay) {
            closeModal();
        }
    });

    // 5. 設定篩選按鈕的事件監聽
    filterList.addEventListener('click', (event) => {
        if (event.target.tagName === 'BUTTON') {
            filterList.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const filterValue = event.target.dataset.filter;
            const titleValue = event.target.dataset.title;
            
            categoryTitle.textContent = titleValue;
            renderVehicles(filterValue);
        }
    });
</script>

</body>
</html>
